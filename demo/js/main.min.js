"use strict";Vue.component("xc-tree",{name:"tree",template:'\n  <div class="xc-tree" v-if="isShow">\n    <div class="item" @click="select(data)" :class="{\'select\': data.select}" :style="style">\n      <span class="arrow" :class="{\'open\': status}" @click.stop="status = !status">\n        <svg v-if="hasChild" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="10" height="10">\n          <path d="M802.68856889 453.16323555l-381.64837605-381.64837603a83.2203173 83.2203173 0 0 0-142.05708173 58.83676446L278.98311111 893.64837602a83.2203173 83.2203173 0 0 0 142.05708173 58.83676446l381.64837605-381.64837603a83.2203173 83.2203173 0 0 0 0-117.6735289z"></path>\n        </svg>\n      </span>\n      <span v-text="data.name" class="txt"></span>\n    </div>\n    <xc-tree v-show="status" :data="i" :level="Level + 1" v-for="i in data.child" :key="i.id" :result="result"></xc-tree>\n  </div>\n  ',props:["data","level","result"],data:function(){return{status:!1}},methods:{select:function(s){this.result?s.select&&(s.select=!1):s.select?this.getStatus(s)?this.check(s,!1):s.select=!1:this.check(s,!0)},check:function(s,t){var e=this;s.select=t,s.child&&s.child.forEach(function(s){e.check(s,t)})},getStatus:function(s){var t=this;return!!s.select&&(!s.child||s.child.every(function(s){return t.getStatus(s)}))}},computed:{hasChild:function(){return!!(this.data&&this.data.child&&this.data.child.length)},Level:function(){return this.level||0},style:function(){return{paddingLeft:10*this.Level+5+"px"}},isShow:function(){return!this.result||function t(s){return!!s.select||!!s.child&&s.child.some(function(s){return t(s)})}(this.data)}}}),Vue.component("o-transfer",{name:"oTransfer",template:'\n  <div class="o-transfer" :class="{\'disabled\': disabled}">\n    <div class="transfer-panel" :style="panelStyle">\n      <div class="tab-head">\n        <div class="tab-item" :class="{\'select\': tabID === 0}" @click="tabID = 0" v-if="display.depts">\n          <span :data-num="SDepts.length">部门</span>\n        </div>\n        <div class="tab-item" :class="{\'select\': tabID === 1}" @click="tabID = 1" v-if="display.dutys">\n          <span :data-num="SDutys.length">职务</span>\n        </div>\n        <div class="tab-item" :class="{\'select\': tabID === 2}" @click="tabID = 2" v-if="display.groups">\n          <span>群组</span>\n        </div>\n        <div class="tab-item" :class="{\'select\': tabID === 3}" @click="tabID = 3" v-if="display.users">\n          <span :data-num="SUsers.length">用户</span>\n        </div>\n      </div>\n      <div class="tab-bar" :class="\'seq\' + TrueTabID"></div>\n      <div class="tab-content" :style="{\'height\': BH + \'px\'}">\n        <div class="body-wrapper" :class="\'seq\' + tabID">\n          \x3c!-- 部门列表 --\x3e\n          <div class="body">\n            <div class="content" :style="bodyStyle">\n              <xc-tree :data="i" v-for="i in Depts" :key="i.id"></xc-tree>\n              \x3c!-- <div class="item" v-for="i in depts" :class="{\'select\': i.select}" v-text="i.name" @click="i.select = !i.select" :key="\'deptsl\' + i.id"></div> --\x3e\n            </div>\n          </div>\n          \x3c!-- 职务-部门 列表 --\x3e\n          <div class="body">\n            <div class="content dutys" :style="bodyStyle">\n              <div class="item" v-for="i in dutys" :key="\'dutysl\' + i.id" :class="{\'select\': i.select}">\n                <p v-text="i.name" @click="toggleDutys(i)" class="cup" title="全选 / 取消"></p>\n                <p class="min-tag" v-if="false"><span v-for="d in i.depts" :key="\'dutysltag\' + d.id" v-text="d.name" @click="d.select = !d.select" :class="{\'select\': d.select}"></span></p>\n              </div>\n            </div>\n          </div>\n          \x3c!-- 用户组列表 --\x3e\n          <div class="body">\n            <div class="content" :style="bodyStyle">\n              <div class="item" v-for="i in groups" :class="{\'select\': i.select}" v-text="i.name + \' ( \' + i.users.length + \' )\'" @click="i.select = !i.select" :key="\'groupsl\' + i.id"></div>\n            </div>\n          </div>\n          \x3c!-- 用户列表 --\x3e\n          <div class="body">\n            <div class="content" :style="bodyStyle">\n              <div class="item" v-for="i in Users" :class="{\'select\': i.select}" @click="toggleUser(i)" :key="\'usersl\' + i.id">\n                <span v-text="i.name"></span>\n                <i class="el-icon-star-on" v-if="i.follow" @click.stop="follow(i, false)" title="取消常用联系人"></i>\n                <i class="el-icon-star-off" v-else @click.stop="follow(i, true)" title="添加为常用联系人"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <slot></slot>\n    <div class="transfer-panel" :style="panelStyle">\n      \x3c!-- 搜索框（添加额外人员） --\x3e\n      <div class="tab-head" :class="{\'disabled\': disableadd}">\n        <div class="search-select">\n          <input type="text" :style="{width: BW - 55 + \'px\'}" :disabled="disableadd" class="search" v-model="key" :class="{\'error\': key && !user, \'success\': key && user}" @keyup.enter="addUser">\n          <div class="search-content">\n            <div class="item" v-for="i in list" :key="i.id" @click="selectUser(i)">\n              <span v-text="i.name" class="name"></span>\n              <span v-text="i.dept"></span>\n            </div>\n          </div>\n        </div>\n        <button type="button" :class="{\'disable\': !user}" @click="addUser">添加</button>\n      </div>\n      <div class="tab-content" :style="{\'height\': BH + \'px\'}">\n        <div class="content del" :style="bodyStyle">\n          \x3c!-- 选择的部门 --\x3e\n          <xc-tree :data="i" v-for="i in Depts" :key="i.id" :result="true"></xc-tree>\n          \x3c!-- <div class="item dept" v-for="i in SDepts" @click="i.select = false" :key="\'deptsr\' + i.id">\n            <span v-text="i.name"></span>\n            <svg class="del" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="14" height="14"><path d="M641.536 189.781333V64c0-35.157333-23.893333-64-56.490667-64H448.597333c-32.426667 0-66.048 28.842667-66.048 64v125.781333H179.2c7.850667 0-51.2 12.885333-51.2 66.218667 0 35.157333 26.624 64 59.050667 64h649.898666C869.376 320 896 291.157333 896 256c0-53.333333-59.050667-66.218667-59.050667-66.218667h-195.413333zM448 192V128c0-44.544 28.416-64 64-64 36.437333 0 64 19.626667 64 64v64h-128zM320 1024h384c70.4 0 128-57.6 128-128v-512H192v512c0 70.4 57.6 128 128 128z m323.754667-483.584c0-15.616 11.946667-28.416 26.368-28.416 14.506667 0 26.368 12.8 26.368 28.416v341.333333c0 15.701333-11.946667 28.501333-26.453334 28.501334-14.421333 0-26.282667-12.8-26.282666-28.501334v-341.333333z m-158.122667 0c0-15.616 11.946667-28.416 26.368-28.416 14.506667 0 26.368 12.8 26.368 28.416v341.333333c0 15.701333-11.946667 28.501333-26.368 28.501334-14.506667 0-26.368-12.8-26.368-28.501334v-341.333333z m-158.122667 0c0-15.616 11.946667-28.416 26.453334-28.416 14.421333 0 26.282667 12.8 26.282666 28.416v341.333333c0 15.701333-11.946667 28.501333-26.368 28.501334-14.506667 0-26.368-12.8-26.368-28.501334v-341.333333z" p-id="2699"></path></svg>\n          </div> --\x3e\n          \x3c!-- 选择的职务 --\x3e\n          <div class="item duty" v-for="i in SDutys" :key="\'dutysr\' + i.id" @click="toggleDutys(i)">\n            <p v-text="i.name"></p>\n            \x3c!-- <p class="min-tag">\n              <template v-for="d in i.depts"><span class="select" :key="d.id" v-if="d.select" v-text="d.name" @click="d.select = false"></span></template>\n            </p> --\x3e\n            <svg class="del" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="14" height="14"><path d="M641.536 189.781333V64c0-35.157333-23.893333-64-56.490667-64H448.597333c-32.426667 0-66.048 28.842667-66.048 64v125.781333H179.2c7.850667 0-51.2 12.885333-51.2 66.218667 0 35.157333 26.624 64 59.050667 64h649.898666C869.376 320 896 291.157333 896 256c0-53.333333-59.050667-66.218667-59.050667-66.218667h-195.413333zM448 192V128c0-44.544 28.416-64 64-64 36.437333 0 64 19.626667 64 64v64h-128zM320 1024h384c70.4 0 128-57.6 128-128v-512H192v512c0 70.4 57.6 128 128 128z m323.754667-483.584c0-15.616 11.946667-28.416 26.368-28.416 14.506667 0 26.368 12.8 26.368 28.416v341.333333c0 15.701333-11.946667 28.501333-26.453334 28.501334-14.421333 0-26.282667-12.8-26.282666-28.501334v-341.333333z m-158.122667 0c0-15.616 11.946667-28.416 26.368-28.416 14.506667 0 26.368 12.8 26.368 28.416v341.333333c0 15.701333-11.946667 28.501333-26.368 28.501334-14.506667 0-26.368-12.8-26.368-28.501334v-341.333333z m-158.122667 0c0-15.616 11.946667-28.416 26.453334-28.416 14.421333 0 26.282667 12.8 26.282666 28.416v341.333333c0 15.701333-11.946667 28.501333-26.368 28.501334-14.506667 0-26.368-12.8-26.368-28.501334v-341.333333z" p-id="2699"></path></svg>\n          </div>\n          \x3c!-- 选择的用户 --\x3e\n          <div class="item user" v-for="i in SUsers" @click="cancelUser(i.id)" :key="\'usersr\' + i.id">\n            <span v-text="i.name"></span>\n            <svg class="del" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="14" height="14"><path d="M641.536 189.781333V64c0-35.157333-23.893333-64-56.490667-64H448.597333c-32.426667 0-66.048 28.842667-66.048 64v125.781333H179.2c7.850667 0-51.2 12.885333-51.2 66.218667 0 35.157333 26.624 64 59.050667 64h649.898666C869.376 320 896 291.157333 896 256c0-53.333333-59.050667-66.218667-59.050667-66.218667h-195.413333zM448 192V128c0-44.544 28.416-64 64-64 36.437333 0 64 19.626667 64 64v64h-128zM320 1024h384c70.4 0 128-57.6 128-128v-512H192v512c0 70.4 57.6 128 128 128z m323.754667-483.584c0-15.616 11.946667-28.416 26.368-28.416 14.506667 0 26.368 12.8 26.368 28.416v341.333333c0 15.701333-11.946667 28.501333-26.453334 28.501334-14.421333 0-26.282667-12.8-26.282666-28.501334v-341.333333z m-158.122667 0c0-15.616 11.946667-28.416 26.368-28.416 14.506667 0 26.368 12.8 26.368 28.416v341.333333c0 15.701333-11.946667 28.501333-26.368 28.501334-14.506667 0-26.368-12.8-26.368-28.501334v-341.333333z m-158.122667 0c0-15.616 11.946667-28.416 26.453334-28.416 14.421333 0 26.282667 12.8 26.282666 28.416v341.333333c0 15.701333-11.946667 28.501333-26.368 28.501334-14.506667 0-26.368-12.8-26.368-28.501334v-341.333333z" p-id="2699"></path></svg>\n            \x3c!-- <i class="el-icon-delete"></i> --\x3e\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  ',props:["data","value","disabled","disableadd","size"],data:function(){return{tabID:-1,selectValue:null,key:"",depts:[],dutys:[],groups:[],users:[],usersID:[],user:null,list:[],display:{depts:!0,dutys:!0,groups:!0,users:!0}}},watch:{data:"update",key:"search",dutys:{handler:"updateValue",deep:!0}},methods:{selectUser:function(s){this.user=s,this.list=[]},search:function(){var t=this;this.$emit("search",this.key,function(s){s.status&&s.users?(1===s.users.length&&(t.user=s.users[0]),1<=s.users.length&&(t.list=s.users)):t.user=null})},follow:function(t,e){var i=this;this.$emit("follow",{id:t.id,name:t.name,follow:e},function(s){s.status&&i.users.some(function(s){return s.id===t.id&&(s.follow=e,!0)})})},addUser:function(){var t=this;this.user&&(this.user.follow=!1,this.users.every(function(s){return s.id!==t.user.id})&&this.users.push(this.user),this.usersID.push(this.user.id),this.key="")},update:function(){var e=this;if(this.data.display)for(var s in this.display)!1===this.data.display[s]?this.display[s]=!1:this.display[s]=!0;["depts","dutys","groups","users"].some(function(s,t){return!!e.display[s]&&(e.tabID=t,!0)}),this.depts=this.data.depts.map(function(s){return{select:!1,id:s.id,pid:s.pid,name:s.name,child:[]}}),this.dutys=this.data.dutys.map(function(s){return{id:s.id,name:s.name,select:!1,depts:s.depts.map(function(s){return{id:s.id,name:s.name,tid:s.tid,select:!1}})}}),this.groups=this.data.groups.map(function(s){return{id:s.id,name:s.name,select:!1,users:s.users.map(function(s){return s.id})}}),this.users=this.data.users.map(function(s){return{id:s.id,name:s.name,follow:!0}}),this.defaultSelect()},defaultSelect:function(){var e,s=this;this.value&&(this.value.depts&&(e={},this.value.depts.forEach(function(s){e[s.id]=!0}),this.depts.forEach(function(s){e[s.id]&&(s.select=!0)})),this.value.dutys&&(e={},this.value.dutys.forEach(function(t){t.depts.forEach(function(s){e[t.id+"-"+s.id]=!0})}),this.dutys.forEach(function(t){t.depts.forEach(function(s){e[t.id+"-"+s.id]&&(s.select=!0,t.select=!0)})})),this.value.users&&this.value.users.forEach(function(t){s.users.every(function(s){return s.id!==t.id})&&s.users.push({id:t.id,name:t.name,follow:!1}),s.usersID.push(t.id)}))},toggleDutys:function(s){var t=s.depts.every(function(s){return s.select});s.depts.forEach(function(s){s.select=!t}),s.select=!t},cancelUser:function(t){var e=this;this.groups.forEach(function(s){s.select&&s.users.some(function(s){return s===t})&&(s.select=!1,e.usersID=e.usersID.concat(s.users.filter(function(s){return s!==t})))}),this.usersID=this.usersID.filter(function(s){return s!==t})},toggleUser:function(s){s.select?this.cancelUser(s.id):this.usersID.push(s.id)},updateValue:function(){var s=this;clearTimeout(this._st),this._st=setTimeout(function(){s.selectValue={depts:s.SDepts.map(function(s){return{id:s.id,name:s.name}}),dutys:s.SDutys.map(function(s){return{id:s.id,name:s.name,depts:s.depts.filter(function(s){return s.select}).map(function(s){return{id:s.id,name:s.name,tid:s.tid}})}}),users:s.SUsers.map(function(s){return{id:s.id,name:s.name}})},s.$emit("change")},242)}},computed:{Depts:function(){var i=this.depts,s=i.filter(function(s){return!s.pid});return s.forEach(function(s){!function t(e){e.child=i.filter(function(s){return e.id===s.pid}),e.child.forEach(function(s){t(s)})}(s)}),s},TrueTabID:function(){for(var s=this.tabID,t=["depts","dutys","groups","users"],e=0;e<=this.tabID;e++)!1===this.display[t[e]]&&s--;return s},SDepts:function(){return this.updateValue(),this.depts.filter(function(s){return s.select})},SDutys:function(){return this.updateValue(),this.dutys.filter(function(s){return s.depts.some(function(s){return s.select})})},SUsers:function(){this.updateValue();var e=this.usersID;return this.groups.forEach(function(s){s.select&&(e=e.concat(s.users))}),this.users.filter(function(t){return e.some(function(s){return s===t.id})})},Users:function(){var e=this.usersID;return this.groups.forEach(function(s){s.select&&(e=e.concat(s.users))}),this.users.map(function(t){return{id:t.id,name:t.name,follow:t.follow,select:e.some(function(s){return s===t.id})}})},Value:function(){return this.selectValue},BW:function(){var s=240;return this.size&&this.size[0]&&(s=this.size[0]),s<240&&(s=240),s},BH:function(){var s=100;return this.size&&this.size[1]&&(s=this.size[1]),s<100&&(width=100),s-34},panelStyle:function(){var s=240,t=320;return this.size&&this.size[0]&&(s=this.size[0],t=this.size[1]),{width:s+"px",height:t+"px"}},bodyStyle:function(){var s=260;return this.size&&this.size[0]&&(s=this.size[0]+20),{width:s+"px"}}},mounted:function(){this.update()}});
//# sourceMappingURL=main.min.js.map
