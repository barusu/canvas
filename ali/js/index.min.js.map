{"version":3,"sources":["ali/script/index.js"],"names":["scope","assembleTree","data","t","list","map","i","id","icon","label","name","action","url","parentId","forEach","findChild","c","filter","length","f","terminal","ci","children","ismenu","push","Vue","el","ich","open","mindex","nindex","acmindex","methods","loadData","_this","this","json","Array","isArray","$","get","selectmain","index","selectnav","opensidebar","_timeout","clearTimeout","closesidebar","close","setTimeout","openPage","document","getElementById","src","computed","ni","san","NavTerminal","mounted","Header","user_switch","notify","option","offset","duration","showClose","$notify","message","_typeof","type","customClass","iconClass","$message","App","window"],"mappings":"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","file":"index.min.js","sourcesContent":["/**\n * Ali\n * 2018-11-01\n */\n(function(scope) {\n  // var json = null;\n  function assembleTree(data) {\n    var t = [];\n    var list = data.map(i => {\n      return {\n        id: i.id,\n        icon: i.icon,\n        label: i.name,\n        action: i.url,\n        parentId: i.parentId\n      };\n    });\n\n    function findChild(i) {\n      var c = list.filter(c => c.parentId == i.id);\n      if(c && c.length) {\n        i.terminal = false;\n        var f = false;\n        c.forEach(ci => {\n          var cf = findChild(ci);\n          if(cf) f = true;\n        });\n        i.children = c;\n        i.ismenu = f;\n        return true;\n      }\n      i.terminal = true;\n      return false;\n    }\n\n    list.forEach(i => {\n      if(!i.parentId) {\n        findChild(i);\n        t.push(i);\n      }\n    });\n    return t;\n  }\n  var store = {};\n  var Sidebar = new Vue({\n    el: '#sidebar',\n    data: {\n      ich: [],\n      open: false,\n      mindex: -1,\n      nindex: -1,\n      acmindex: -1\n    },\n    methods: {\n      loadData() {\n        if(scope.json && Array.isArray(scope.json)) {\n          this.ich = assembleTree(scope.json);\n        }else {\n          $.get(' https://easy-mock.com/mock/59a8fa924006183e48efd0e3/demo/nav', data => {\n            this.ich = assembleTree(data);\n          }, 'json');\n        }\n      },\n      selectmain(index) {\n        this.mindex = index;\n        this.nindex = -1;\n      },\n      selectnav(index) {\n        this.nindex = index;\n      },\n      opensidebar() {\n        if(this._timeout) {\n          clearTimeout(this._timeout);\n          this._timeout = null;\n        }\n        this.open = true;\n      },\n      closesidebar() {\n        this.mindex = -1;\n        this.nindex = -1;\n        this.open = false;\n        this._timeout = null;\n      },\n      close() {\n        if(this._timeout) clearTimeout(this._timeout);\n        this._timeout = setTimeout(this.closesidebar, 500);\n      },\n      openPage(i) {\n        if(i.action) {\n          this.acmindex = this.mindex;\n          this.closesidebar();\n          var f = document.getElementById('iframe');\n          if(f) f.src = i.action;\n        }\n      }\n    },\n    computed: {\n      ni() {\n        if(this.mindex !== -1 && this.ich[this.mindex]) {\n          if(Array.isArray(this.ich[this.mindex].children)) {\n            return this.ich[this.mindex].children;\n          }else {\n            return [];\n          }\n        }\n        return [];\n      },\n      san() {\n        if(this.nindex !== -1 && this.ni[this.nindex]) {\n          if(Array.isArray(this.ni[this.nindex].children)) {\n            return this.ni[this.nindex].children;\n          }else {\n            return [];\n          }\n        }\n        return [];\n      },\n      NavTerminal() {\n        if(this.mindex !== -1 && this.ich[this.mindex] && !this.ich[this.mindex].ismenu) return true;\n        return false;\n      }\n    },\n    mounted() {\n      this.loadData();\n    }\n  });\n  var Header = new Vue({\n    el: '#header',\n    data: {\n      user_switch: false\n    },\n    methods: {\n      notify(option) {\n        if(!option.offset) option.offset = 40;\n        if(option.duration !== 0) option.showClose = false;\n        return this.$notify(option);\n      },\n      message(option) {\n        if(typeof(option) === typeof('x')) option = {message: option };\n        if(option.duration === 0 && !('showClose' in option)) option.showClose = true;\n        if(option.type == 'loading') {\n          option.customClass = 'el-message-loading';\n          option.iconClass = \"iconfont icon-loading\";\n          option.duration = 0;\n          option.showClose = false;\n        }\n        return this.$message(option);\n      }\n    }\n  });\n  scope.App = Header;\n})(window);\n\n"]}