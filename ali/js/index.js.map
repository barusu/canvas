{"version":3,"sources":["ali/script/index.js"],"names":["scope","assembleTree","data","t","list","map","i","id","icon","action","url","parentId","forEach","c","filter","length","f","terminal","ismenu","push","Vue","el","ich","open","store","Sidebar","_this","this","mindex","json","Array","isArray","nindex","$","get","methods","loadData","selectmain","selectnav","index","opensidebar","_timeout","clearTimeout","closesidebar","close","setTimeout","document","getElementById","computed","ni","children","src","san","NavTerminal","mounted","Header","user_switch","notify","option","offset","duration","showClose","$notify","_typeof","message","type"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Ali\n * 2018-11-01\n */\n(function(scope) {\n  // var json = null;\n  function assembleTree(data) {\n    var t = [];\n    var list = data.map(i => {\n      return {\n        id: i.id,\n        icon: i.icon,\n        label: i.name,\n        action: i.url,\n        parentId: i.parentId\n      };\n    });\n\n    function findChild(i) {\n      var c = list.filter(c => c.parentId == i.id);\n      if(c && c.length) {\n        i.terminal = false;\n        var f = false;\n        c.forEach(ci => {\n          var cf = findChild(ci);\n          if(cf) f = true;\n        });\n        i.children = c;\n        i.ismenu = f;\n        return true;\n      }\n      i.terminal = true;\n      return false;\n    }\n\n    list.forEach(i => {\n      if(!i.parentId) {\n        findChild(i);\n        t.push(i);\n      }\n    });\n    return t;\n  }\n  var store = {};\n  var Sidebar = new Vue({\n    el: '#sidebar',\n    data: {\n      ich: [],\n      open: false,\n      mindex: -1,\n      nindex: -1,\n      acmindex: -1\n    },\n    methods: {\n      loadData() {\n        if(scope.json && Array.isArray(scope.json)) {\n          this.ich = assembleTree(scope.json);\n        }else {\n          $.get(' https://easy-mock.com/mock/59a8fa924006183e48efd0e3/demo/nav', data => {\n            this.ich = assembleTree(data);\n          }, 'json');\n        }\n      },\n      selectmain(index) {\n        this.mindex = index;\n        this.nindex = -1;\n      },\n      selectnav(index) {\n        this.nindex = index;\n      },\n      opensidebar() {\n        if(this._timeout) {\n          clearTimeout(this._timeout);\n          this._timeout = null;\n        }\n        this.open = true;\n      },\n      closesidebar() {\n        this.mindex = -1;\n        this.nindex = -1;\n        this.open = false;\n        this._timeout = null;\n      },\n      close() {\n        if(this._timeout) clearTimeout(this._timeout);\n        this._timeout = setTimeout(this.closesidebar, 500);\n      },\n      open(i) {\n        if(i.action) {\n          this.acmindex = this.mindex;\n          this.close();\n          var f = document.getElementById('iframe');\n          if(f) f.src = i.action;\n        }\n      }\n    },\n    computed: {\n      ni() {\n        if(this.mindex !== -1 && this.ich[this.mindex]) {\n          if(Array.isArray(this.ich[this.mindex].children)) {\n            return this.ich[this.mindex].children;\n          }else {\n            return [];\n          }\n        }\n        return [];\n      },\n      san() {\n        if(this.nindex !== -1 && this.ni[this.nindex]) {\n          if(Array.isArray(this.ni[this.nindex].children)) {\n            return this.ni[this.nindex].children;\n          }else {\n            return [];\n          }\n        }\n        return [];\n      },\n      NavTerminal() {\n        if(this.mindex !== -1 && this.ich[this.mindex] && !this.ich[this.mindex].ismenu) return true;\n        return false;\n      }\n    },\n    mounted() {\n      this.loadData();\n    }\n  });\n  var Header = new Vue({\n    el: '#header',\n    data: {\n      user_switch: false\n    },\n    methods: {\n      notify(option) {\n        if(!option.offset) option.offset = 40;\n        if(option.duration !== 0) option.showClose = false;\n        return this.$notify(option);\n      },\n      message(option) {\n        if(typeof(option) === typeof('x')) option = {message: option };\n        if(option.duration === 0 && !('showClose' in option)) option.showClose = true;\n        if(option.type == 'loading') {\n          option.customClass = 'el-message-loading';\n          option.iconClass = \"iconfont icon-loading\";\n          option.duration = 0;\n          option.showClose = false;\n        }\n        return this.$message(option);\n      }\n    }\n  });\n  scope.App = Header;\n})(window);\n\n"]}